@model List<Infracciones1Model>

<div class="row justify-content-between align-items-end mb-1">
    <div class="col-12 col-md-auto mt-4 mb-2">
        <h5 class="px-4"><b>Listado de infracción</b></h5>
        <h6 class="px-4 text-muted">Edita los datos de infracción.</h6>
    </div>
    <div class="col-12 me-md-4 col-md-6 col-lg-7 col-xl-auto">
        <div class="row">
            <div class="col-auto btnOutline btnOutlinePrimary my-2 mx-auto mx-xl-2 p-0">
                @* <button>
                <h6 class="m-0 d-flex align-items-center"><i class="icon-pdf h5 mb-0 me-2"></i><b>PDF de reporte de infracción</b></h6>
                </button>*@
                <button type="button" onclick="downLoadPdfFiltered()">
                    <h6 class="m-0 d-flex align-items-center"><i class="icon-pdf h5 mb-0 me-2"></i><b>PDF de reporte de infracción</b></h6>
                </button>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12 mb-4 px-4 rounded">

        @*<div class="col-12 mb-4 px-4 rounded gridCustom">*@
        @(
            Html.Kendo().Grid(Model)
            .Name("Grid")
            .Columns(columns =>
            {
                columns.Bound(p => p.folioInfraccion).Title("Folio").Width(90);
                columns.Bound(p => p.conductor).Title("Conductor").Width(90);
                columns.Bound(p => p.propietario).Title("Propietario").Width(100);
                columns.Bound(c => c.FullFechaConductor).Title("Fecha Aplicada a").Width(150);
                columns.Bound(c => c.garantia).Title("Garantía").Width(90);
                columns.Bound(c => c.delegacion).Title("Delegación/Oficina").Width(90);

                @*Columna Vehiculo tampoco se que poner si se relaciona a alguna tabla *@
                @*Aun no se usa cortesia pro que no saben como se relaciona *@
                @*columns.Bound(c => c.cortesia).Title("Estatus/Cortesía").Width(120);*@

                columns.Bound(p => p.IdInfraccion).ClientTemplate(
            "<button onclick=\"ShowUpdate('#= IdInfraccion #')\" class='w-100 btn'><h6 class='m-0 colorPrimary'><i class='icon-edit me-2'></i><b>Editar</b></h6></button>"
            ).Title("Editar").Sortable(false).Width(90);

                columns.Bound(p => p.IdInfraccion).ClientTemplate(
                "<button onclick=\"ShowDetail('#= IdInfraccion #')\" class='w-100 btn'><h6 class='m-0 colorPrimary'><i class='icon-edit me-2'></i><b>Ver</b></h6></button>"
                ).Title("Ver").Sortable(false).Width(90);

                columns.Bound(p => p.IdInfraccion).ClientTemplate(
                "<button onclick=\"downLoadPdf('#= IdInfraccion #')\" class='w-100 btn'><h6 class='m-0 colorPrimary'><i class='h5 icon-pdf me-2'></i><b>Descargar</b></h6></button>"
                ).Title("Exportar").Sortable(false).Width(90);

            }).HtmlAttributes(new { style = "height:450" })
            .Pageable(pager => pager.AlwaysVisible(true).PageSizes(new int[] { 5, 10, 20, 100 }).Position(GridPagerPosition.Top))
            .Sortable()
            .Scrollable(scr => scr.Height(350))
            .DataSource(dataSource => dataSource
            .Ajax()
            .ServerOperation(false)
            )
            )
        @*</div>*@
    </div>
</div>

<script>

    function downLoadPdfFiltered() {
        var data = {
            Placas: $('#txtPlacas').val(),
            folioInfraccion: $('#txtFolioInfraccion').val(),
            placas: $('#ddlEstatus').val(),
            IdEstatus: $('#ddlEstatus').val(),
            IdTipoCortesia: $('#ddlCortesia').val(),
            IdDependencia: parseInt($('#ddlDependencia').val()),
            IdGarantia: $('#ddlGarantia').val(),
            IdDelegacion: $('#ddlDelegacion').val(),
            Propietario: $('#txtPropietario').val(),
            Conductor: $('#txtConductor').val(),
            NumeroLicencia: $('#txtNumeroLicencia').val(),
            NumeroEconomico: $('#txtNumeroEconomico').val(),
            FechaInicio: $('#start').val(),
            FechaFin: $('#end').val()
        };
        var json = JSON.stringify(data);
        window.location = '/Infracciones/CreatePdf?data=' + json;
    }

    function downLoadPdf(Id) {
        window.location = '/Infracciones/CreatePdfUnRegistro?IdInfraccion=' + Id;
    }

    function ShowDetail(Id) {
        //console.log(Id);
        window.location = '/Infracciones/Detail?IdInfraccion=' + Id;     
    }

    function ShowUpdate(Id) {
        //console.log(Id);
        window.location = '/Infracciones/Update?IdInfraccion=' + Id;
    }

</script>